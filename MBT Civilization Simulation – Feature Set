 MBT Civilization Simulation â€“ Feature Set
Villages and Proto-Technology (Steam Power)
# --- Initialization ---
village_centers = np.zeros_like(field)
village_influence = np.zeros_like(field)
steam_power_map = np.zeros_like(field)
village_threshold = 0.65
village_gravity_strength = 0.003
steam_activation_threshold = 0.8
steam_effect = 0.0015

# --- Inside update function ---
village_mask = (memory > village_threshold) & (honor_map > village_threshold) & (emotion_map > village_threshold)
village_centers = gaussian_filter(village_mask.astype(float), sigma=3)
village_influence = gaussian_filter(village_centers, sigma=6)
field += village_influence * village_gravity_strength

steam_mask = (village_centers > 0.5) & (legacy_map > steam_activation_threshold) & (emotion_map > steam_activation_threshold)
steam_power_map += steam_mask * 0.02
steam_power_map *= 0.995

field += steam_power_map * steam_effect
desire_expression += steam_power_map * 0.0003
desire_exploration += steam_power_map * 0.0004
emotion_map += steam_power_map * 0.0001

maps += [village_centers, village_influence, steam_power_map]
Tools, Trade, and Heroic Monuments
# --- Initialization ---
tool_map = np.zeros_like(field)
trade_routes = np.zeros_like(field)
monument_map = np.zeros_like(field)
myth_symbol_map = np.zeros_like(field)

tool_creation_threshold = 0.75
monument_threshold = 0.95
tool_decay = 0.995
myth_decay = 0.997

# --- Inside update function ---
tool_producers = (honor_map > tool_creation_threshold) & (legacy_map > tool_creation_threshold)
tool_map[tool_producers] += 0.01
tool_map *= tool_decay

trade_routes[:] = 0
for i in range(grid_size):
    for j in range(grid_size):
        if village_centers[i, j] > 0.5 and tool_map[i, j] > 0.03:
            neighbors = [(i + dx, j + dy) for dx in [-3, 0, 3] for dy in [-3, 0, 3]]
            for ni, nj in neighbors:
                if 0 <= ni < grid_size and 0 <= nj < grid_size:
                    if village_centers[ni, nj] > 0.5 and tool_map[ni, nj] < 0.005:
                        trade_routes[ni, nj] += 0.002

monument_sites = (legacy_map > monument_threshold) & (honor_map > monument_threshold)
monument_map[monument_sites] += 0.02
monument_map *= 0.995

myth_symbol_map += gaussian_filter(monument_map, sigma=5) * 0.002
myth_symbol_map *= myth_decay

field += tool_map * 0.001 + myth_symbol_map * 0.0003
desire_expression += monument_map * 0.0002
desire_bonding += myth_symbol_map * 0.0001

maps += [tool_map, trade_routes, monument_map, myth_symbol_map]
